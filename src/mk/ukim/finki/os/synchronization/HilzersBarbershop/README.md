Hilzer’s Barbershop Problem

Hilzer’s Barbershop Probleм претставува покомплицирана верзија на класичниот проблем на берберница (Barbershop Problem).

Во овој проблем берберницата има повеќе столчиња за потстрижување (исто колку и бербери), повеќе бербери (но не повеќе од 15, ке видиме зошто) и просторија за чекање која се состои од една софа на која може да се сместат најмногу 4 клиенти и простор за стоење. Ограничувањата се дека во берберницата не смее во ниеден момент да има повеќе од 20 клиенти (ова ги вклучува столчињата, софата и просторот за стоење). Од ова ограничување произлегува и ограничувањето на берберите и столчињата односно бидејќи секој клиент мора прво да чека стоечки, па да чека седечки, па да оди на столчето за потстрижување, па ако ставиме повеќе од 15 бербери ќе нема никој што ќе чека стоечки што ќе предизвика deadlock.

Клиент не смее да влезе во берберницата ако нејзиниот капацитет е исполнет (внатре веќе има 20 клиенти). Откако ќе влезе, клиентот стои додека да се ослободи место на софата (да има помалку од 4 клиенти на софата). Кога некој бербер е слободен, еден од клиентите (не е важно кој) кои седат на софата се префрлува на неговото столче за потстрижување и му сигнализира на берберот дека тој е спремен за потстрижување. Во овој момент ако има клиенти кои стојат еден од нив (не е важно кој) седнува на софата. Кога некој од клиентите е готов со потстрижувањето тој плака кај било кој од берберите (немора кај тој што го потстрижувал). Повеќе клиенти може да плаќаат во исто време. Берберите своето време го делат помегу: потстрижување, наплаќање и чекање да дојде клиент на нивото столче.

Со други зборови, следниве ограничувања треба да важат при синхронизацијата: 
• Клиентите ги повикуваат следниве функции и тоа стрикно во овој редослед: enterShop,  sitOnSofa,  sitInBarberChair, getHairCut, pay, exitShop. 
• Берберите ги повикуваат: cutHair, acceptPayment. 
• Клиентите не може да ја повикаат enterShop ако капацитетот на берберницата е исполнет. 
• Ако капацитетот на софата е полн, клиент којшто пристигнал не може да ја повика sitOnSofa додека еден од клиентите на софата не ја повика sitInBarberChair. 
• Ако сите бербер(и) се зафатени, клиент не може да ја повика sitInBarberChair додека еден од клиентите кои се потстрижуваат не ја повика pay. 
• Клиентот мора да плати (да ја повика pay) пред берберот да  ја повика acceptPayment. 
• Берберот мора да ја повика acceptPayment пред клиентот да ја повика exitShop. 


Се користат семафори и бројачи по желба. Тие треба да се дефинитат на почетокот од класата и треба да се static. Се иницијализираат во методот init(). Треба да се имплементираат методите execute() во секоја од двете класи (Barber и Customer) користејќи ги претходно споменатите методи.